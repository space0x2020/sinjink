<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="style.css">
<title>DB LOCK</title>
</head>
<body>

#include "style_svg.css"

<div id="svgdefs" style="display:none;">
  <svg>
#include "svg_components.svg"
  </svg>
</div>

<div style="display:none">
<svg>
  <defs>
    <g id="table_4_1">
      <rect class="ff" x="0" y="0" width="390" height="78" />
      <text class="ff" x="5" y="22" font-size="16">T1</text>
      <text class="ff" x="100" y="22" font-size="16">T2</text>
      <line class="ff" x1="0" y1="0" x2="130" y2="30" />
      <line class="ff" x1="0" y1="30" x2="390" y2="30" />
      <line class="ff" x1="0" y1="54" x2="390" y2="54" />
      <line class="ff" x1="130" y1="0" x2="130" y2="78" />
      <line class="ff" x1="260" y1="0" x2="260" y2="78" />
      <text class="ff" x="5" y="48" font-size="16">共有ロック(S)</text>
      <text class="ff" x="5" y="72" font-size="16">排他ロック(X)</text>
      <text class="ff" x="195" y="22" font-size="16" text-anchor="middle">共有ロック(S)</text>
      <text class="ff" x="325" y="22" font-size="16" text-anchor="middle">排他ロック(X)</text>
      <text class="ff" x="195" y="48" font-size="16" text-anchor="middle">〇</text>
      <text class="ff" x="325" y="48" font-size="16" text-anchor="middle">×</text>
      <text class="ff" x="195" y="72" font-size="16" text-anchor="middle">×</text>
      <text class="ff" x="325" y="72" font-size="16" text-anchor="middle">×</text>
    </g>
    <g id="lockflow1">
      <rect class="ff" x="40" y="0" width="170" height="30" />
      <text class="ff" x="125" y="22" text-anchor="middle">トランザクションＴ１</text>
      <line class="ff" x1="125" y1="30" x2="125" y2="200" />
      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#garrowhead1_10D" transform="translate(125, 200)"></use>
      <rect class="ff" x="340" y="0" width="170" height="30" />
      <text class="ff" x="425" y="22" text-anchor="middle">トランザクションＴ２</text>
      <line class="ff" x1="425" y1="30" x2="425" y2="200" />
      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#garrowhead1_10D" transform="translate(425, 200)"></use>
      <rect class="ff" x="225" y="105" width="100" height="30" />
      <text class="ff" x="275" y="126" text-anchor="middle">データ</text>
    </g>
    <g id="locks">
      <rect class="ffw" x="0" y="30" width="40" height="40" />
      <text class="ffwrev" x="20" y="55" text-anchor="middle">S</text>
      <path class="ff sw3" d="M2 30 A 18 18 0 0 1 36 22" />
    </g>
    <g id="lockx">
      <rect class="ffw" x="0" y="30" width="40" height="40" />
      <text class="ffwrev" x="20" y="55" text-anchor="middle">X</text>
      <path class="ff sw3" d="M2 30 A 18 18 0 0 1 36 22" />
    </g>
    <g id="nosign">
      <circle x="0" y="0" r="15" stroke="red" stroke-width="5" fill="white" />
      <line x1="5" y1="5" x2="25" y2="25" stroke="red" stroke-width="5" transform="translate(-15, -15)" />
    </g>
  </defs>
</svg>
</div>

<div id="campus" class="basepane" style="height:2800;">
<div style="display:block">
  <input type="button" id="B01_01" onclick="disppage(1, 1);" value="1" />
  <input type="button" id="B01_02" onclick="disppage(1, 2);" value="2" />
</div>

<div id="lock01_01" class="page">
  <svg xmlns="http://www.w3.org/2000/svg" width="700" height="800" viewBox="0 0 700 800">
  <g transform="translate(0, 30)">
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#table_4_1" transform="translate(100, 30)"></use>
    <rect class="ff" x="100" y="60" width="390" height="24" style="fill-opacity:0.5;fill:yellow" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lockflow1" transform="translate(30, 150)"></use>
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#locks" transform="translate(250, 180)"></use>
    <text class="ff ss" x="10" y="210">データ参照のための</text>
    <text class="ff ss" x="10" y="230"><tspan font-weight="bolder">共有</tspan>ロックをかける。</text>
    <path class="ff" d="M5 200 Q 5 190 15 190 L 140 190 Q 150 190 150 200 L 150 220 255 255 150 230 Q 150 240 140 240 L15 240 Q 5 240 5 230 Z" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#locks" transform="translate(320, 180)"></use>
    <text class="ff ss" x="470" y="210">データ参照のための</text>
    <text class="ff ss" x="470" y="230">共有ロックをかける。</text>
    <path class="ff" d="M465 200 Q 465 190 475 190 L605 190 Q 615 190 615 200 L615 230 Q 615 240 605 240 L 475 240 Q 465 240 464 230 L355 255 465 220 L 465 200" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lockx" transform="translate(400, 280)"></use>
    <text class="ff ss" x="470" y="320">データ更新のための</text>
    <text class="ff ss" x="470" y="340">排他ロックをかける。</text>
    <path class="ff" d="M465 310 Q 465 300 475 300 L605 300 Q 615 300 615 310 L615 340 Q 615 350 605 350 L 475 350 Q 465 350 464 340 L355 290 465 330 L 465 310" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#nosign" transform="translate(380, 300)"></use>
  </g>
  </svg>
</div><!-- page -->

<div id="lock01_02" class="page">
  <svg xmlns="http://www.w3.org/2000/svg" width="700" height="800" viewBox="0 0 700 800">
  <g transform="translate(0, 30)">
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#table_4_1" transform="translate(100, 30)"></use>
    <rect class="ff" x="100" y="84" width="390" height="24" style="fill-opacity:0.5;fill:yellow" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lockflow1" transform="translate(30, 150)"></use>
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lockx" transform="translate(250, 180)"></use>
    <text class="ff ss" x="10" y="210">データ更新のための</text>
    <text class="ff ss" x="10" y="230"><tspan font-weight="bolder">排他</tspan>ロックをかける。</text>
    <path class="ff" d="M5 200 Q 5 190 15 190 L 140 190 Q 150 190 150 200 L 150 220 255 255 150 230 Q 150 240 140 240 L15 240 Q 5 240 5 230 Z" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#locks" transform="translate(320, 180)"></use>
    <text class="ff ss" x="470" y="210">データ参照のための</text>
    <text class="ff ss" x="470" y="230">共有ロックをかける。</text>
    <path class="ff" d="M465 200 Q 465 190 475 190 L605 190 Q 615 190 615 200 L615 230 Q 615 240 605 240 L 475 240 Q 465 240 464 230 L355 255 465 220 L 465 200" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#nosign" transform="translate(380, 240)"></use>
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lockx" transform="translate(400, 280)"></use>
    <text class="ff ss" x="470" y="320">データ更新のための</text>
    <text class="ff ss" x="470" y="340">排他ロックをかける。</text>
    <path class="ff" d="M465 310 Q 465 300 475 300 L605 300 Q 615 300 615 310 L615 340 Q 615 350 605 350 L 475 350 Q 465 350 464 340 L355 290 465 330 L 465 310" />
    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#nosign" transform="translate(380, 300)"></use>
  </g>
  </svg>
</div><!-- page -->


</div><!-- campus -->
#ifdef MOODLE
<script text/script="javascript">
#include "changepage.js"
</script>
#else
<script src="changepage.js"></script>
#endif
<script text/script="javascript">
  setpagename("dbsql", "dbdqlsub");
</script>
</body>
</html>
