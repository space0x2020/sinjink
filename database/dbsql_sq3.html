<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="style.css">
<title>TITLE DBPRACTICE SQL</title>
</head>
<body>

<p><span>SQL演習問題</span></p>

<ul>
<li><a href="#prepare">準備</a></li>
<li><a href="#sampletables">例題表</a></li>
<li><a href="#example">例題</a></li>
<li><a href="#practice1">SQL演習１</a></li>
<li><a href="#practice2">SQL演習２</a></li>
<li><a href="#practice3">SQL演習３</a></li>
<li><a href="#practice4">SQL演習４</a></li>
<li><a href="#practice5">SQL演習５</a></li>
<li><a href="#practice6">SQL演習６</a></li>
<li><a href="#practice7">SQL演習７</a></li>
<li><a href="#practice8">SQL演習８</a></li>
</ul>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="prepare"></a>準備</h2>
<p style="text-align: left;">psqlを起動し、postgres/tigerで接続します。</p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="sampletables"></a>例題表 (設定済です)</h2>
<p style="text-align: left;">dept表</p>
<table border="1">
<tbody>
<tr><th><span style="text-decoration: underline;">deptno</span></th><th>dname</th><th>loc</th></tr>
<tr>
<td align="center">10</td>
<td>ACCOUNTING</td>
<td>NEW YORK</td>
</tr>
<tr>
<td align="center">20</td>
<td>RESEARCH</td>
<td>DALLAS</td>
</tr>
<tr>
<td align="center">30</td>
<td>SALES</td>
<td>CHICAGO</td>
</tr>
<tr>
<td align="center">40</td>
<td>OPERATIONS</td>
<td>BOSTON</td>
</tr>
</tbody>
</table>
<p></p>
<p>emp表</p>
<table border="2">
<tbody>
<tr><th><span style="text-decoration: underline;">empno</span></th><th>ename</th><th>job</th><th>mgr</th><th>hiredate</th><th>sal</th><th>comm</th><th><span style="border-bottom: dashed 1px;">deptno</span></th></tr>
<tr>
<td align="center">7369</td>
<td>SMITH</td>
<td>CLERK</td>
<td>7902</td>
<td>80-12-17</td>
<td align="right">800</td>
<td align="right">&nbsp;</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">7499</td>
<td>ALLEN</td>
<td>SALESMAN</td>
<td>7698</td>
<td>81-02-20</td>
<td align="right">1600</td>
<td align="right">300</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7521</td>
<td>WARD</td>
<td>SALESMAN</td>
<td>7698</td>
<td>81-02-22</td>
<td align="right">1250</td>
<td align="right">500</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7566</td>
<td>JONES</td>
<td>MANAGER</td>
<td>7839</td>
<td>81-04-02</td>
<td align="right">2975</td>
<td>&nbsp;</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">7654</td>
<td>MARTIN</td>
<td>SALESMAN</td>
<td>7698</td>
<td>81-09-28</td>
<td align="right">1250</td>
<td align="right">1400</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7698</td>
<td>BLAKE</td>
<td>MANAGER</td>
<td>7839</td>
<td>81-05-01</td>
<td align="right">2850</td>
<td>&nbsp;</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7782</td>
<td>CLARK</td>
<td>MANAGER</td>
<td>7839</td>
<td>81-06-09</td>
<td align="right">2450</td>
<td>&nbsp;</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">7788</td>
<td>SCOTT</td>
<td>ANALYST</td>
<td>7566</td>
<td>87-04-19</td>
<td align="right">3000</td>
<td>&nbsp;</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">7839</td>
<td>KING</td>
<td>PRESIDENT</td>
<td>&nbsp;</td>
<td>81-11-17</td>
<td align="right">5000</td>
<td>&nbsp;</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">7844</td>
<td>TURNER</td>
<td>SALESMAN</td>
<td>7698</td>
<td>81-09-08</td>
<td align="right">1500</td>
<td align="right">0</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7876</td>
<td>ADAMS</td>
<td>CLERK</td>
<td>7788</td>
<td>87-05-23</td>
<td align="right">1100</td>
<td>&nbsp;</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">7900</td>
<td>JAMES</td>
<td>CLERK</td>
<td>7698</td>
<td>81-12-03</td>
<td align="right">950</td>
<td>&nbsp;</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">7902</td>
<td>FORD</td>
<td>ANALYST</td>
<td>7566</td>
<td>81-12-03</td>
<td align="right">3000</td>
<td>&nbsp;</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">7934</td>
<td>MILLER</td>
<td>CLERK</td>
<td>7782</td>
<td>82-01-23</td>
<td align="right">1300</td>
<td>&nbsp;</td>
<td align="center">10</td>
</tr>
</tbody>
</table>
<p><small>(emp表のdeptno列は、dept表のdeptno列を参照する外部キー、空白は null)</small></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="example"></a>例題</h2>
<p>例１．emp表のename列とdeptno列を抽出。</p>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select ename, deptno from emp;
・実行結果：
ENAME      DEPTNO
---------- ------
SMITH          20
ALLEN          30
WARD           30
JONES          20
MARTIN         30
BLAKE          30
CLARK          10
SCOTT          20
KING           10
TURNER         30
ADAMS          20
JAMES          30
FORD           20
MILLER         10

14行が選択されました。
</pre>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice1"></a>SQL演習１</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">1.</td>
<td>emp表から deptno が 30 の empno ename job mgr hiredate sal deptno 列を抽出。 (<a href="javaScript:exMenu('ans001')">SQL表示</a>)
<div id="ans001" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where deptno = 30;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">2.</td>
<td>emp表から ename が BLAKE であるデータの empno ename job mgr hiredate sal deptno 列を抽出。 (<a href="javaScript:exMenu('ans002')">SQL表示</a>)
<div id="ans002" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where ename = 'BLAKE';
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">3.</td>
<td>emp表から deptno が 20 以上であるデータの ename 列と empno 列を抽出。 (<a href="javaScript:exMenu('ans003')">SQL表示</a>)
<div id="ans003" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select ename, empno from emp where deptno &gt;= 20;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">4.</td>
<td>emp表とdept表を結合し、emp表の ename列と deptno列、dept表の dname列、loc列を抽出。(結合条件無し) (<a href="javaScript:exMenu('ans004')">SQL表示</a>)
<div id="ans004" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.ename, e.deptno, d.dname, d.loc from emp e, dept d;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">5.</td>
<td>emp表から job を重複データを排除して抽出。（２つの方法） (<a href="javaScript:exMenu('ans005')">SQL表示</a>)
<div id="ans005" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select distinct job from emp;<br />
select job from emp group by job;
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice2"></a>SQL演習２</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">6.</td>
<td>emp表とdept表を結合し、emp表の ename列と deptno列、dept表の dname列、loc列を抽出。(joinを使い、deptnoで(等価)結合) (<a href="javaScript:exMenu('ans006')">SQL表示</a>)
<div id="ans006" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.ename, e.deptno, d.dname, d.loc
from emp e join dept d on e.deptno = d.deptno;

select e.ename, deptno, d.dname, d.loc
from emp e natural join dept d;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">7.</td>
<td>emp表とdept表を結合し、emp表の ename列と deptno列、dept表の dname列、loc列を抽出。(whereを使い、deptno列で(等価)結合) (<a href="javaScript:exMenu('ans007')">SQL表示</a>)
<div id="ans007" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.ename, e.deptno, d.dname, d.loc from emp e, dept d
where e.deptno = d.deptno;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">8.</td>
<td>emp表からenameが Kで始まる人と Kで終わる人の empno ename job mgr hiredate sal deptno列を抽出。 (<a href="javaScript:exMenu('ans008')">SQL表示</a>)
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">出力例：
EMPNO ENAME                JOB                  MGR HIREDATE DEPTNO
----- -------------------- ------------------ ----- -------- ------
 7782 CLARK                MANAGER             7839 81-06-09     10
 7839 KING                 PRESIDENT          ?     81-11-17     10
</pre>
<div id="ans008" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where ename like 'K%' or ename like '%K';
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">9.</td>
<td>emp表のデータを、empno 順(昇順)に抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans009')">SQL表示</a>)
<div id="ans009" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp order by empno;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">10.</td>
<td>emp表から deptno が 20 以上のデータを empno 順(降順)に抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans010')">SQL表示</a>)
<div id="ans010" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where deptno &gt;= 20 order by empno desc;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">11.</td>
<td>emp表のデータを、deptno の降順、empno の昇順で抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans011')">SQL表示</a>)
<div id="ans011" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp order by deptno desc, empno asc;
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice3"></a>SQL演習３</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">12.</td>
<td>emp表とdept表から(deptno列で(等価)結合)、deptno毎の行数（レコード数）を数える。抽出する列は、deptno dname count(*)。 (<a href="javaScript:exMenu('ans012')">SQL表示</a>)
<div id="ans012" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.deptno, d.dname, count(*)
from emp e join dept d on e.deptno = d.deptno
group by e.deptno, d.dname;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">13.</td>
<td>emp表とdept表から(deptno列で(等価)結合)、deptno毎の行数（レコード数）を数え、件数が５件以上を抽出。抽出する列は、deptno dname count(*)。 (<a href="javaScript:exMenu('ans013')">SQL表示</a>)
<div id="ans013" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.deptno, d.dname, count(*)
from emp e join dept d on e.deptno = d.deptno
group by e.deptno, d.dname having count(*) &gt;= 5;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">14.</td>
<td>emp表から sal の合計、平均、最大値、最小値を求める。 (<a href="javaScript:exMenu('ans014')">SQL表示</a>)
<div id="ans014" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select sum(sal), avg(sal), min(sal), max(sal) from emp;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">15.</td>
<td>emp表から、deptno 毎の sal の合計、平均、最大値、最小値を求める。抽出する列は、deptno、salの合計、salの平均、salの最大値、salの最小値。 (<a href="javaScript:exMenu('ans015')">SQL表示</a>)
<div id="ans015" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select deptno, sum(sal), avg(sal), max(sal), min(sal)
from emp group by deptno;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">16.</td>
<td>emp表から sal の最大値を持つデータを抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans016')">SQL表示</a>)
<div id="ans016" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where sal = (select max(sal) from emp);
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">17.</td>
<td>emp表から deptnoが 30 の人の平均 sal 以上の人を抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans017')">SQL表示</a>)
<div id="ans017" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where sal &gt;=
    (select avg(sal) from emp where deptno = 30);
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice4"></a>SQL演習４</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">18.</td>
<td>emp表とdept表から、loc が 'CHICAGO' である人を抽出。抽出する列は、empno ename job mgr hiredate deptno loc。 (<a href="javaScript:exMenu('ans018')">SQL表示</a>)
<div id="ans018" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.empno, e.ename, e.job, e.mgr, e.hiredate, e.deptno, d.loc
from emp e join dept d on e.deptno = d.deptno
where d.loc = 'CHICAGO';
<br /><br />
select e.empno, e.ename, e.job, e.mgr, e.hiredate, e.deptno, d.loc
from emp e, dept d
where e.deptno = d.deptno and d.loc = 'CHICAGO';
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">19.</td>
<td>以下のデータを emp表に挿入。 (<a href="javaScript:exMenu('ans019')">SQL表示</a>)
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">empno   : 7370        ename : SMITH    job   : SALESMAN   mgr   : 7698
hiredate: 2001-12-10  sal   :1200.00   comm  :  400       deptno: 40

empno   : 7371        ename : KIDY     job   : SALESMAN   mgr   : 7902
hiredate: 2003-10-30  sal   : 700.00   comm  :  300       deptno: 50

empno   : 7372        ename : SMITH    job   : SALESMAN   mgr   : 7698
hiredate: 2005-11-22  sal   :1200.00   comm  :  400       deptno: NULL

  注：hiredateは、to_date('2001-12-10', 'yyyy-mm-dd') として挿入する。
</pre>
<div id="ans019" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em; overflow: auto; white-space: pre;">insert into emp values(7370, 'SMITH', 'SALESMAN', 7698, to_date('2001-12-10', 'yyyy-mm-dd'), 1200.00, 400,40);
insert into emp values(7371, 'KIDY', 'SALESMAN', 7902, to_date('2003-10-30', 'yyyy-mm-dd'),  700.00, 300, 50);/*ERROR*/
insert into emp values(7372, 'SMITH', 'SALESMAN', 7698, to_date('2005-11-22', 'yyyy-mm-dd'), 1200.00, 400, NULL);
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">20.</td>
<td>emp表から mgr 列が NULL である行を抽出。抽出する列は、empno ename job mgr hiredate sal deptno。 (<a href="javaScript:exMenu('ans020')">SQL表示</a>)
<div id="ans020" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select empno, ename, job, mgr, hiredate, sal, deptno
from emp where mgr is null;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">21.</td>
<td>emp表で、empno が 7370 である人の deptno を 30 に設定。 (<a href="javaScript:exMenu('ans021')">SQL表示</a>)
<div id="ans021" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">update emp set deptno = 30 where empno = 7370;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">22.</td>
<td>emp表で、empno が 7370 である人の deptno を 70 に設定。 (<a href="javaScript:exMenu('ans022')">SQL表示</a>)
<div id="ans022" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">update emp set deptno = 70 where empno = 7370; /*ERROR*/
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">23.</td>
<td>emp表から同姓同名の人を名前と人数抽出。 (<a href="javaScript:exMenu('ans023')">SQL表示</a>)
<div id="ans023" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select ename, count(*) from emp group by ename having count(*) &gt;1;
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice5"></a>SQL演習５</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">24.</td>
<td>emp表から、empno が 7370、7371、7372 である人を削除。 (<a href="javaScript:exMenu('ans024')">SQL表示</a>)
<div id="ans024" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">delete from emp where empno in (7370, 7371, 7372);
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">25.</td>
<td>emp表から、empno ename とその mgr の ename を抽出。 (<a href="javaScript:exMenu('ans025')">SQL表示</a>)
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">出力例：
      EMPNO ENAME      ENAME
     ------ ---------- ----------
       7788 SCOTT      JONES
       7902 FORD       JONES
       7499 ALLEN      BLAKE
       7521 WARD       BLAKE
       7900 JAMES      BLAKE
       7844 TURNER     BLAKE
       7654 MARTIN     BLAKE
       7934 MILLER     CLARK
       7876 ADAMS      SCOTT
       7566 JONES      KING
       7782 CLARK      KING
       7698 BLAKE      KING
       7369 SMITH      FORD
</pre>
<div id="ans025" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.empno, e.ename, b.ename
from emp e join emp b on e.mgr = b.empno;
   <br /><br />
select e.empno, e.ename, b.ename
from emp e left outer join emp b on e.mgr = b.empno;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">26.</td>
<td>emp表から、deptno が 10 である人の empno と ename、およびその mgr の ename を抽出。 (<a href="javaScript:exMenu('ans026')">SQL表示</a>)
<div id="ans026" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select e.empno, e.ename, b.ename
from emp e join emp b on e.mgr = b.empno
where e.deptno = 10;
   <br /><br />
select e.empno, e.ename, b.ename
from emp e left outer join emp b on e.mgr = b.empno
where e.deptno = 10;
</pre>
</div>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">27.</td>
<td>dept表から、deptno が 10 のデータを削除。 (<a href="javaScript:exMenu('ans027')">SQL表示</a>)
<div id="ans027" style="display: none;">
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">delete from dept where deptno = 10;     /*ERROR*/
</pre>
</div>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice6"></a>SQL演習６</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">28.</td>
<td>トランザクション</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(1)</td>
<td>dept表で deptno が 10 の loc を TOKYO に変更。<br />
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">update dept set loc = 'TOKYO' where deptno = 10;
</pre>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(2)</td>
<td>dept表に deptno:50、dname:SALES、loc:OSAKA のデータを挿入。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">insert into dept values(50, 'SALES', 'OSAKA');
</pre>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(3)</td>
<td>dept表から deptno が 40 であるデータを削除。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">delete from dept where deptno = 40;
</pre>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(4)</td>
<td>この状態で dept 表がどうなっているか確認。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select * from dept;
結果は？
</pre>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(5)</td>
<td>ロールバック。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">rollback;
</pre>
</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: right;">(6)</td>
<td>この状態で、dept 表がどうなっているか確認。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">select * from dept;
結果は？
</pre>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice7"></a>SQL演習７</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">29.</td>
<td>ウィンドウをもう一つ開き、sqlplus を起動。最初のウィンドウを WIN1、後から開いたウィンドウを WIN2。</td>
</tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td colspan="2">(1)<span style="text-decoration: underline;">WIN1: dept表を更新。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; update dept set loc = 'TOKYO' where deptno = 10;
</pre>
</td>
</tr>
<tr>
<td width="300"></td>
<td>(2)<span style="text-decoration: underline;">WIN2: WIN1と同じデータを更新。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; update dept set loc = 'OSAKA' where deptno = 10;
</pre>
結果は？</td>
</tr>
<tr>
<td colspan="2">(3)<span style="text-decoration: underline;">WIN1: ロールバック。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; rollback;
</pre>
</td>
</tr>
<tr>
<td colspan="2">(4)<span style="text-decoration: underline;">WIN1: dept表を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(5)<span style="text-decoration: underline;">WIN2: dept表を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(6)<span style="text-decoration: underline;">WIN2: ロールバック。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; rollback;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(7)WIN2:再度dept表を確認。
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept;
</pre>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<h2 style="text-align: left; background-color: lightblue; border-style: solid; border-width: 0 3 3 0;"><a name="practice8"></a>SQL演習８</h2>
<table>
<tbody>
<tr>
<td style="vertical-align: top; text-align: right;">30.</td>
<td>ウィンドウを２つ開いた状態で、(最初のウィンドウを WIN1、後から開いたウィンドウを WIN2。)</td>
</tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td>(1)<span style="text-decoration: underline;">WIN1: dept表の内容を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(2)<span style="text-decoration: underline;">WIN2: dept表の内容を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept;
</pre>
</td>
</tr>
<tr>
<td colspan="2">(3)<span style="text-decoration: underline;">WIN1: dept表に次のデータを挿入。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">deptno : 50
dname  : SALES
loc    : OSAKA
SQL&gt; insert into dept values(50, 'SALES', 'OSAKA');
</pre>
</td>
</tr>
<tr>
<td colspan="2">(4)<span style="text-decoration: underline;">WIN1: dept表の内容を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept order by deptno;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(5)<span style="text-decoration: underline;">WIN2: dept表の内容を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept order by deptno;
</pre>
</td>
</tr>
<tr>
<td colspan="2">(6)<span style="text-decoration: underline;">WIN1: コミット。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; commit;
</pre>
</td>
</tr>
<tr>
<td></td>
<td>(7)<span style="text-decoration: underline;">WIN2: 再度 dept表の内容を確認。</span>
<pre style="font-family: 'Lucida Console'; background: #EAFAFA; margin-left: 1em;">SQL&gt; select * from dept order by deptno;
</pre>
</td>
</tr>
</tbody>
</table>
<p align="right"><a href="#top"><small>TOPへ</small></a></p>
<script type="text/javascript">// <![CDATA[
function exMenu(tName)
{
  tMenu = document.all[tName].style;
  if (tMenu.display == 'none') tMenu.display = "block"; else tMenu.display = "none";
}

function exMenuOpen(tName)
{
    tMenu = document.all[tName].style;
    if (tMenu.display == 'none') tMenu.display = "block";
}

function exMenuClose(tName)
{
    tMenu = document.all[tName].style;
    if (tMenu.display == 'block') tMenu.display = "none";
}

function exMenuAllOpen(ar)
{
    for (i = 0; i < ar.length; i++)
        exMenuOpen(ar[i]);
}

function exMenuAllClose(ar)
{
    for (i = 0; i < ar.length; i++)
        exMenuClose(ar[i]);
}
// ]]></script>

</body>
</html>
